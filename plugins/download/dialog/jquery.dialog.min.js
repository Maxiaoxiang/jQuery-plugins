!function(a,b,c,d){var e={title:"",close:"x",content:"",zIndex:"9999",isMask:!0,clickMask:!1,opacity:"0.5",button:{},type:"dialog",followScroll:!0,time:2e3,isDraggable:!1,handleCls:"M-title",axis:"",rangeCls:"",clone:!1,cloneCls:"clone",isResizable:!1,beforeShow:function(){},afterHide:function(){},startDrag:function(){},moveDrag:function(){},stopDrag:function(){}},f=function(d,e){var f=this,g=a(d),h=!1,i=!1,j=!1,k=a("body"),l=a(b),m=a(c),n={iX:"",iY:"",mX:"",mY:""},o=a('<div class="M-title">'+e.title+"</div>"),p=a('<div class="M-close">'+e.close+"</div>"),q=a('<div class="M-content">'+e.content+"</div>"),r=a('<div class="M-button"></div>'),s=a(".M-mask"),t=e.rangeCls?a("."+e.rangeCls):k,u=e.clone?a('<div class="'+e.cloneCls+'"></div>'):"",v=e.clone?u:g,w=a('<div class="e-resize" data-type="e-resize"></div>'),x=a('<div class="s-resize" data-type="s-resize"></div>'),y=a('<div class="se-resize" data-type="se-resize"></div>');"object"==typeof u&&u.css({position:"absolute",top:g.position().top,left:g.position().left,width:g.outerWidth(),height:g.outerHeight(),cursor:"move","z-index":e.zIndex+1}),f.open=function(a){0!=e.beforeShow(f)&&((a||function(){})(),g.show(),e.isMask&&s.show(),"message"==e.type&&setTimeout(f.close,e.time),h=!0)},f.close=function(){g.hide(),0!==s.length&&s.remove(),e.afterHide(),h=!1,m.off("mousemove mouseup")},f.resize=function(){g.css({top:(l.height()-g.outerHeight())/2+m.scrollTop()+"px",left:(l.width()-g.outerWidth())/2+"px"})},f.scroll=function(){g.css({top:(l.height()-g.outerHeight())/2+m.scrollTop()})},f.getOpen=function(){return h},f.mouseCoords=function(a){return a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+c.body.scrollLeft-c.body.clientLeft,y:a.clientY+c.body.scrollTop-c.body.clientTop}},f.start=function(a,b){0!=e.startDrag(f,a)&&((b||function(){})(),i=!0,n.iX=f.mouseCoords(a).x-g.position().left,n.iY=f.mouseCoords(a).y-g.position().top,g.css({position:"absolute"}),e.clone&&u.css({left:n.mX,top:n.mY}).appendTo(t))},f.drag=function(a,b){if(i&&0!=e.moveDrag(f,a)){a.stopPropagation(),a.preventDefault();var d=c.body.scrollTop;switch(n.mX=f.mouseCoords(a).x-n.iX,n.mY=f.mouseCoords(a).y-n.iY,e.axis){case"x":b.css({left:n.mX});break;case"y":b.css({top:n.mY});break;default:b.css({left:n.mX,top:n.mY})}e.rangeCls?(b.position().left<0&&b.css({left:"0"}),b.position().left>t.width()-b.width()&&b.css({left:t.width()-b.width()}),b.position().top<0&&b.css({top:"0"}),b.position().top>t.height()-b.height()&&b.css({top:t.height()-b.height()})):(b.position().left<0&&b.css({left:"0"}),b.position().left>l.width()-b.width()&&b.css({left:l.width()-b.width()}),b.position().top<d&&b.css({top:d}),b.position().top>l.height()-b.height()+d&&b.css({top:l.height()-b.height()+d}))}},f.stop=function(a,b){i&&(e.clone&&(g.css({top:b.position().top,left:b.position().left,width:b.outerWidth(),height:b.outerHeight()}),b.remove()),i=!1,e.stopDrag(f,a))},f.getDraging=function(){return i},f.resizeStart=function(a,b){j=!0,this.handle=a},f.resizeing=function(a,b){if(j){var c=this.handle.data("type"),d=f.mouseCoords(b),e=g.offset();switch(k.css({overflow:"hidden",cursor:c}),c){case"e-resize":d.x-e.left<t.width()?g.css({width:d.x-e.left+"px"}):g.css({width:t.width()+"px"}),x.css({width:g.width()});break;case"s-resize":d.y-e.top<t.height()?g.css({height:d.y-e.top+"px"}):g.css({height:t.height()+"px"}),w.css({height:g.height()});break;default:d.y-e.top<t.height()?g.css({height:d.y-e.top+"px"}):g.css({height:t.height()+"px"}),d.x-e.left<t.width()?g.css({width:d.x-e.left+"px"}):g.css({width:t.width()+"px"}),w.css({height:g.height()}),x.css({width:g.width()})}}},f.resizeStop=function(a,b){j&&(j=!1,e.clone&&u.css({top:g.position().top,left:g.position().left,width:g.outerWidth(),height:g.outerHeight()}),k.css({cursor:"auto"}))},f.getReszeing=function(){return j};var z=function(){if("message"==e.type)g.css({display:"none",position:"absolute",top:(l.height()-g.outerHeight())/2+m.scrollTop()+"px",left:(l.width()-g.outerWidth())/2+"px","z-index":e.zIndex}).empty().append(q);else{g.css({display:"none",position:"absolute",top:(l.height()-g.outerHeight())/2+m.scrollTop()+"px",left:(l.width()-g.outerWidth())/2+"px","z-index":e.zIndex}).empty().append(o).append(p).append(q),r.appendTo(q),p.click(f.close);for(name in e.button)!function(b){var c=b.split("|"),d=c[1]?c[1]:"btn";a('<a href="javascript:;" class="M-'+d+'">'+c[0]+"</a>").appendTo(r).click(function(){e.button[b](f)})}(name)}if(e.isMask&&0==s.length&&(s=a('<div class="M-mask"></div>').css({display:"none",position:"fixed",top:"0",left:"0",width:"100%",height:"100%",background:"#000",opacity:e.opacity,"z-index":e.zIndex-1}).appendTo(k).before(g)),l.resize(f.resize),e.followScroll&&l.scroll(f.scroll),e.clickMask&&s.click(f.close),e.isDraggable){var b=e.handleCls?a("."+e.handleCls):g;b.css({cursor:"move"}).on("mousedown",function(a){f.start(a)}),m.on({mousemove:function(a){f.drag(a,v)},mouseup:function(a){f.stop(a,v)}}),f.drag()}if(e.isResizable){var c=parseInt(g.css("border-right-width"))||0,d=parseInt(g.css("border-bottom-width"))||0,h="auto"==g.css("z-index")?"auto":g.css("z-index");w.css({position:"absolute",top:0-c,right:"-4px",height:g.outerHeight(),width:"8px","z-index":h,cursor:"e-resize"}).appendTo(g),x.css({position:"absolute",left:0-d,bottom:"-4px",height:"8px",width:g.outerWidth(),"z-index":h,cursor:"s-resize"}).appendTo(g),y.css({position:"absolute",right:"-1px",bottom:"-1px",height:"16px",width:"16px","z-index":h,cursor:"se-resize"}).appendTo(g);var i=[w,x,y];for(var j in i)i[j].mousedown(function(b){f.resizeStart(a(this),b)});m.on({mousemove:function(a){f.resizeing(this.handle,a)},mouseup:function(a){f.resizeStop(this.handle,a)}})}f.open()};z()};return a.fn.dialog=function(b,c){"function"==typeof b?(c=b,b={}):(b=b||{},c=c||function(){});var d=a.extend({},e,b);return this.each(function(){var a=new f(this,d);c(a)})},a}(jQuery,window,document);